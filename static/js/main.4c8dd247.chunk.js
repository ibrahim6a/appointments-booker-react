(this["webpackJsonpappointment-app-react"]=this["webpackJsonpappointment-app-react"]||[]).push([[0],{14:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),i=a(7),o=a.n(i),c=a(1),r=a(2),s=a(4),m=a(3),u=a(8),p=window.M,b=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={date:"",user:{fullName:"John Doe",email:"jd@gmail.com"},availability:[]},e.updateUser=function(t){var a=Object(u.a)({},e.state).user,l=t.target,n=l.name,i=l.value;a[n]=i,e.setState({user:a})},e.formSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.state.user,e.state.date)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelectorAll(".datepicker"),a=p.Datepicker.init(t,{disableWeekends:!0,format:"dd, mm, yyyy"})[0];a.options.onSelect=function(){e.setState({date:a.date.toString()},e.fetchAvailableTimes)}}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:this.formSubmit},n.a.createElement("div",{className:"input-field"},n.a.createElement("label",null,"Full Name:"),n.a.createElement("input",{className:"",type:"text",name:"fullName",value:this.state.user.fullName,onChange:this.updateUser})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",null,"Email: "),n.a.createElement("input",{className:"",type:"text",name:"email",value:this.state.user.email,onChange:this.updateUser})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",null,"Select Date:"),n.a.createElement("input",{type:"text",className:"datepicker"})),n.a.createElement("input",{type:"submit",value:"Check Availability",className:"btn"})))}}]),a}(l.Component),v=a(5);var d=function(e){var t;return t=e.timeSlot.available?n.a.createElement("button",{className:"btn-flat amber-text text-accent-4",onClick:function(){e.bookAppointment(e.timeSlot)}},"Book Now"):n.a.createElement("button",{className:"btn-flat amber-text text-accent-4 disabled"},n.a.createElement("s",null,"Unavaliable")),n.a.createElement("div",{className:"col s3"},n.a.createElement("div",{className:"card blue-grey darken-1"},n.a.createElement("div",{className:"card-content white-text"},n.a.createElement("span",{className:"card-title"},e.timeSlot.timeSlot)),n.a.createElement("div",{className:"card-action"},t)))},h=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={availableTimes:[{id:0,timeSlot:9,available:!0},{id:1,timeSlot:10,available:!0},{id:2,timeSlot:11,available:!0},{id:3,timeSlot:12,available:!0},{id:4,timeSlot:13,available:!0},{id:5,timeSlot:14,available:!0},{id:6,timeSlot:15,available:!0},{id:7,timeSlot:16,available:!0}]},e.checkAvailabilityInArray=function(e,t){for(var a=0;a<t.length;a++)if(e===t[a].slot)return!0;return!1},e.setAvailability=function(){var t=Object(v.a)(e.props.availability),a=Object(v.a)(e.state.availableTimes).map((function(a){return e.checkAvailabilityInArray(a.timeSlot,t)?(a.available=!1,a):(a.available=!0,a)}));e.setState({availableTimes:a})},e.bookAppointment=function(t){e.props.bookSlot(t)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.setAvailability()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container"},n.a.createElement("h4",null,"Available Slots"),n.a.createElement("div",{className:"row"},this.state.availableTimes.map((function(t){return n.a.createElement(d,{key:t.timeSlot,timeSlot:t,bookAppointment:e.bookAppointment})}))))}}]),a}(l.Component),f=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={user:null,selectedDate:null,selectedTime:null,availability:null,refresh:!1},e.showTimeSlots=function(t,a){e.setState({user:t,selectedDate:a,refresh:!1},e.fetchAvailableTimes)},e.bookSlot=function(t){e.setState({selectedTime:t.timeSlot},e.sendRequestToServer),console.log(e.state.selectedDate)},e.sendRequestToServer=function(){fetch("https://appointment-app-server.herokuapp.com/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({refresh:!1})})).catch((function(e){console.log(e)}))},e}return Object(r.a)(a,[{key:"fetchAvailableTimes",value:function(){var e=this;console.log(this.state.selectedDate),fetch("https://appointment-app-server.herokuapp.com/date/".concat(this.state.selectedDate)).then((function(e){return console.log(e),e.json()})).then((function(t){console.log(t),e.setState({availability:t,refresh:!0},(function(){}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(b,{handleSubmit:this.showTimeSlots}),this.state.selectedDate&&this.state.refresh&&n.a.createElement(h,{bookSlot:this.bookSlot,availability:this.state.availability}))}}]),a}(l.Component);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(f,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a(14)}},[[9,1,2]]]);
//# sourceMappingURL=main.4c8dd247.chunk.js.map